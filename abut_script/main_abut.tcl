#/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
set abut_script_path "/remote/am04home1/arpih/bin/from_suren/abut_script"
set prefix "hd1p_"
#///////////////////////////For io pin cells/////////////////////////////////////// 
#//////////////////////////if each io have one pin then set 1,or each io have 4 pin please set 4  /////////////////////
#//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#///////////////IF count_io_pin=4 ,please keep gpg io cell name like gpgsm_pin_$prefix(1x4,2x2)    ////////////////////
#/////////////////////////////////////////        gio cell name like   gio_pin_$prefix(1x4,2x2)    ////////////////////
#/////////////////////////////////////////        bio cell name like   bio_pin_$prefix(1x4,2x2)    ////////////////////
#//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#////////////////////////////////////////
set wa_prefix "64"
#set all_wa [list "64" "128" "192" "256"]
set all_wa [list ]
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#puts "Script Path is $abut_script_path"
#puts "Your project is $prefix"
#puts "Your choosen lib name is $mylibname and cell name $cellname"
#puts "You choose WA $wa_prefix configuration"
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
set cell_list2 {{0  0  1   1   1  1   1   4}}
#setting configuration
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////#
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////#
#/////////////Description for call all_abut function//////////////////////////////////////////////////////////#
#///////////////////////////////////////////////////////////////////////////// ///////////////////////////////#
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////#
#all_abutment all_cells bex redex pg cdd dr cmx wa x y               	//////////////////////////////////////#
#1.all_cells --->list of list all cells				     	//////////////////////////////////////#
#2.b---------->bist enable or disable(1 or 0)			    	//////////////////////////////////////#
#3.r-------->red enable or disable(1 or 0)			    	//////////////////////////////////////#
#4.pg----------->lpg and gpg row enable or disable(1 or 0)	    	//////////////////////////////////////#	
#5.cd---------->left version enable or disable(1 or 0)		    	//////////////////////////////////////#
#6.dr----------->shifters include or not(1 or 0)		    	//////////////////////////////////////#
#7.cm---------->what version cm you wont(1 or 2 or 4 or 8 or 16)	//////////////////////////////////////#
#8.wa----------->sac_wa row enable or disable(1 or 0)			//////////////////////////////////////#
#9.x------------>x cordinate for startin drawing			//////////////////////////////////////#
#10.y------------>y cordinate for startin drawing			//////////////////////////////////////#
#11.bk----------->bank for memory					//////////////////////////////////////#
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////#
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////#
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////#
#//////////////  		b   r   pg  cd   dr cm  wa     bk
				
set cell_list_hd1p {		{1   1   1    1   1   4   1    4}
				{1   1   1    1   0   4   1    4}
				{1   0   0    0   0   4   1    4}
				{1   0   0    1   0   4   1    2}
				{1   0   0    1   1   4   1    2}
				{1   0   0    1   1   4   0    2}
				{1   0   0    1   0   4   0    2}
				{1   0   0    0   0   4   0    2}
				{0   0   0    1   1   4   0    2}									       
				{0   0   0    1   0   4   0    2}
				{0   0   0    0   0   4   0    2}
			   	{1   1   0    0   0   4   1    1}
				{1   1   0    1   0   4   1    1}
				{1   1   0    1   1   4   1    1}
				{0   0   0    1   1   4   1    1}
				{0   0   0    0   0   4   1    1}
				{0   0   0    1   0   4   1    1}
				{0   0   1    1   0   4   1    1}
				{0   0   1    1   1   4   1    1}
				{0   0   1    0   1   4   1    1}
				{1   0   0    1   1   4   0    1}
				{1   0   0    1   0   4   0    1}
				{1   0   0    0   0   4   0    1}
				{0   0   0    1   1   4   0    1}
				{0   0   0    1   0   4   0    1}
				{0   0   0    0   0   4   0    1}}

#//////////////  		b   r   pg  cd   dr cm  wa     bk
set cell_list_hd1p_ss10stv2 {	{1   1   1    1   1   4   0    4}
				{1   1   1    1   0   4   0    4}
				
				{1   0   0    1   1   4   0    2}
				
				{1   0   1    1   0   4   0    1}
				{1   1   0    1   1   4   0    1}
				}
				
set cell_list_hdrf2p {		{1   1   1    1   1   1   1    4}
				{1   1   1    1   0   1   1    4}
				{1   0   0    0   0   1   1    4}
				{1   0   0    1   0   1   1    2}
				{1   0   0    1   1   1   1    2}
				{1   0   0    1   1   1   0    2}
				{1   0   0    1   0   1   0    2}
				{1   0   0    0   0   1   0    2}
				{0   0   0    1   1   1   0    2}									       
				{0   0   0    1   0   1   0    2}
				{0   0   0    0   0   1   0    2}
			   	{1   1   0    0   0   1   1    1}
				{1   1   0    1   0   1   1    1}
				{1   1   0    1   1   1   1    1}
				{0   0   0    1   1   1   1    1}
				{0   0   0    0   0   1   1    1}
				{0   0   0    1   0   1   1    1}
				{0   0   1    1   0   1   1    1}
				{0   0   1    1   1   1   1    1}
				{0   0   1    0   1   1   1    1}
				{1   0   0    1   1   1   0    1}
				{1   0   0    1   0   1   0    1}
				{1   0   0    0   0   1   0    1}
				{0   0   0    1   1   1   0    1}
				{0   0   0    1   0   1   0    1}
				{0   0   0    0   0   1   0    1}}

set cell_list_diff_wa {		{1   1   1    1   1   1   1    4}}
	
	
if {$prefix == "hdrf2p_"} {
	set mylibname "hdrf2p_cluster"
	set cellname "allabut"
	set architecture "new"
	set all_cells_name "hdrf2p_allcells"
	set all_cells_lib_name "hdrf2p_db"
	set count_io_pin 4
	set gpg_pin_name "hdrf2p_io_pin"
	set gio_pin_name "hdrf2p_io_pin"
	set bio_pin_name "hdrf2p_io_pin"
	set pin_lib_name "hdrf2p_pincells"
	set pin_lib_name "hdrf2p_db"
	set cell_list_choice $cell_list_hdrf2p
} elseif {$prefix == "hd1p_"} {
	set mylibname "cluster"
	set cellname "allabut"
	set architecture "standart"
	set all_cells_name "hd1p_allcells"
	set all_cells_lib_name "cluster"
	set count_io_pin 1
	set cell_list_choice $cell_list_hd1p_ss10stv2
}
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
source $abut_script_path/get_cell_libnames.tcl	
source $abut_script_path/pin_adder.tcl	
set all_cell_list [getInsts $all_cells_lib_name $all_cells_name layout]
source $abut_script_path/cell_name_temp.tcl
if {$architecture == "standart"} {
	puts "You choose $architecture architecture"
	source $abut_script_path/abut_standart_architecture.tcl	
} else {
	puts "You choose $architecture architecture"
	source $abut_script_path/abut_new_architecture.tcl
}	
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
set current_cell_name $cellname
set cellname "$cellname\_$wa_prefix"
#/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	
				
#Creating abut				
make_abut $cell_list_choice $mylibname $cellname

				
foreach wa_p $all_wa {
	set cellname "allabut_$wa_p"
	set wa_prefix $wa_p
	source $abut_script_path/get_cell_libnames.tcl	
	set all_cell_list [getInsts $all_cells_lib_name $all_cells_name layout]
	source $abut_script_path/cell_name_temp.tcl
	if {$architecture == "standart"} {
		puts "You choose $architecture architecture"
		source $abut_script_path/abut_standart_architecture.tcl	
	} else {
		puts "You choose $architecture architecture"
		source $abut_script_path/abut_new_architecture.tcl
	}	
	make_abut $cell_list_diff_wa $mylibname $cellname
}
